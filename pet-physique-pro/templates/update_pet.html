<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create New Pet</title>
</head>
<body>
    <h1>Update Pet</h1>

    <form id="createPetForm">
        <label for="weight">Weight:</label>
        <input type="number" id="weight" name="weight" required><br><br>

        <label for="height">Height:</label>
        <input type="number" id="height" name="height" step="0.01" required><br><br>

        <!-- Include a hidden input field to store the pet ID -->
        <input type="hidden" id="petId" name="petId" value="2">

        <button type="button" onclick="updatePet()">Update Pet</button>
    </form>

    <div id="responseMessage"></div>

    <script>
        function updatePet() {
            const form = document.getElementById("createPetForm");
            const weight = form.querySelector("#weight").value;
            const height = form.querySelector("#height").value;
            const petId = form.querySelector("#petId").value;

            // Check if petId is defined
            if (!petId) {
                console.error("Pet ID is undefined");
                return;
            }

            fetch(`/api/pets/${petId}`, {
                method: "PUT",
                body: JSON.stringify({ weight, height }), // Send only weight and height in the request body
                headers: {
                    "Content-Type": "application/json"
                }
            })
            .then(response => response.json())
            .then(data => {
                const responseMessage = document.getElementById("responseMessage");
                if (data.error) {
                    responseMessage.innerText = "Error: " + data.error;
                } else {
                    responseMessage.innerText = "Pet updated successfully.";
                    form.reset();
                }
            })
            .catch(error => {
                console.error("Error updating pet:", error);
            });
        }
    </script>
</body>
</html>
